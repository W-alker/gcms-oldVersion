"use strict";function _defineProperty(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}$.ajax({url:"/user.html/home",type:"put",async:!1,contentType:"application/json",statusCode:{401:function(){alert("登录已过期，请重新登录！"),window.location.href="/"}},success:function(e){alert(e.msg)},error:function(e){console.log(e)}}),$.ajax({url:"/user.html/upload_info",type:"put",contentType:"application/json",success:function(e){e.name;var a=e.profile,n=e.email,t=e.phone;$("a.profile > img").prop("src",a),$(".preview_profile").prop("src",a),$('[data-index="2"] [name="email"]').val(n),$('[data-index="2"] [name="tel"]').val(t)},error:function(e){console.log(e)}}),$(document).ready(function(){$('[data-toggle="popover"]').popover()});var profile_base64URL,Flipper=function(){function e(e,a,n){this.isFlipping=!1,this.duration=600,this.flipNode=e,this.frontNode=e.querySelector(".front"),this.backNode=e.querySelector(".back"),this.setFrontTime(a),this.setBackTime(n)}return e.prototype.setFrontTime=function(e){this.frontNode.dataset.number=e},e.prototype.setBackTime=function(e){this.backNode.dataset.number=e},e.prototype.flipDown=function(e,a){var n=this;if(this.isFlipping)return!1;this.isFlipping=!0,this.setFrontTime(e),this.setBackTime(a),this.flipNode.classList.add("running"),setTimeout(function(){n.flipNode.classList.remove("running"),n.isFlipping=!1,n.setFrontTime(a)},this.duration)},e}(),getTimeFromDate=function(e){return e.toTimeString().slice(0,8).split(":").join("")},flips=document.querySelectorAll(".flip"),now=new Date,nowTimeStr=getTimeFromDate(new Date(now.getTime()-1e3)),nextTimeStr=getTimeFromDate(now),flippers=Array.from(flips).map(function(e,a){return new Flipper(e,nowTimeStr[a],nextTimeStr[a])});function display_index3(){$(".gms-mainUI-box").css("display","none").eq(3).css("display","block")}function display_index6(){$(".gms-mainUI-box").css("display","none").eq(6).css("display","block")}setInterval(function(){for(var e=new Date,a=getTimeFromDate(new Date(e.getTime()-1e3)),n=getTimeFromDate(e),t=0;t<flippers.length;t++)a[t]!==n[t]&&flippers[t].flipDown(a[t],n[t])},1e3),$(".date-day").text("今天是："+now.getFullYear()+"年"+now.getMonth()+"月"+now.getDate()+"日").addClass(".date-day-ani"),$('[data-index="1"] button').click(function(){var e,a=new FormData(document.querySelector('[data-index="1"] form'));a.set("idCode",localStorage.getItem("idCode")),a.get("oldPwd")?a.get("newPwd")?a.get("confirmPwd")?a.get("newPwd")===a.get("confirmPwd")?$.ajax((_defineProperty(e={url:"/user.html/update_pwd",type:"post",contentType:"application/json",data:a,processData:!1},"contentType",!1),_defineProperty(e,"success",function(e){"verify_code"!==e.err?"oldPwd"!==e.err?0===e.err&&($('[data-index="1"] .alert').css("display","none"),alert("密码修改成功！"),location.reload()):$('[data-index="1"] .alert').css("display","none").eq(0).css("display","block").text(e.msg):$('[data-index="1"] .alert').css("display","none").eq(3).css("display","block").text(e.msg)}),_defineProperty(e,"error",function(e){console.log(e)}),e)):$('[data-index="1"] .alert').css("display","none").eq(2).css("display","block").text("两次密码不一致！"):$('[data-index="1"] .alert').css("display","none").eq(2).css("display","block").text("请确认新密码！"):$('[data-index="1"] .alert').css("display","none").eq(1).css("display","block").text("请输入新密码！"):$('[data-index="1"] .alert').css("display","none").eq(0).css("display","block").text("请输入旧密码！")}),$(".update_profile").change(function(){if(this.files.length){var e=this.files[0],a=new FileReader;a.readAsDataURL(e),a.onload=function(){document.querySelector(".preview_profile").src=this.result,profile_base64URL=this.result}}}),$('[data-index="2"] [type="submit"]').click(function(){var e=new FormData(document.querySelector("[data-index='2'] form"));e.set("profile_base64URL",profile_base64URL),e.set("idCode",localStorage.getItem("idCode")),$.ajax({url:"/user.html/update_info",type:"put",data:e,processData:!1,contentType:!1,success:function(e){alert(e.msg),location.reload()},error:function(e){console.log(e)}})}),$('[data-navIndex="4"]').one("click",function(){$('.gms-mainUI-box[data-index="4"] > iframe').prop("src","https://lajifenleiapp.com/")}),$('[data-navIndex="5"]').one("click",function(){var e=new BMapGL.Map("gms-map-box");e.centerAndZoom(new BMapGL.Point(117.204384,31.760012),20),e.setHeading(64.5),e.setTilt(60);var a=new BMapGL.Marker(new BMapGL.Point(117.202439,31.758872)),n=new BMapGL.Marker(new BMapGL.Point(117.202807,31.75911)),t=new BMapGL.Marker(new BMapGL.Point(117.203122,31.759394)),o=new BMapGL.Marker(new BMapGL.Point(117.203405,31.59659)),r=new BMapGL.Marker(new BMapGL.Point(117.203724,31.759916)),i=new BMapGL.Marker(new BMapGL.Point(117.203122,31.758542)),s=new BMapGL.Marker(new BMapGL.Point(117.203459,31.758542)),d=new BMapGL.Marker(new BMapGL.Point(117.203773,31.758795)),l=new BMapGL.Marker(new BMapGL.Point(117.204097,31.759072)),p=new BMapGL.Marker(new BMapGL.Point(117.204254,31.759624)),c=new BMapGL.Marker(new BMapGL.Point(117.203445,31.75969)),u=new BMapGL.Marker(new BMapGL.Point(117.20332,31.76038)),w=new BMapGL.Marker(new BMapGL.Point(117.2641,31.759851)),m=new BMapGL.Marker(new BMapGL.Point(117.205273,31.761064)),f=new BMapGL.Marker(new BMapGL.Point(117.206333,31.760722)),M=new BMapGL.Marker(new BMapGL.Point(117.205269,31.761701)),y=new BMapGL.Marker(new BMapGL.Point(117.206571,31.762226)),L=new BMapGL.Marker(new BMapGL.Point(117.208319,31.761716)),B=new BMapGL.Marker(new BMapGL.Point(117.207398,31.761731)),G=new BMapGL.Marker(new BMapGL.Point(117.208211,31.76106)),v=new BMapGL.Marker(new BMapGL.Point(117.20265,31.75987)),g=new BMapGL.Marker(new BMapGL.Point(117.20195,31.759667));e.addOverlay(a),e.addOverlay(n),e.addOverlay(t),e.addOverlay(o),e.addOverlay(r),e.addOverlay(i),e.addOverlay(s),e.addOverlay(d),e.addOverlay(l),e.addOverlay(p),e.addOverlay(c),e.addOverlay(u),e.addOverlay(w),e.addOverlay(m),e.addOverlay(f),e.addOverlay(M),e.addOverlay(y),e.addOverlay(L),e.addOverlay(B),e.addOverlay(G),e.addOverlay(v),e.addOverlay(g);var k=new BMapGL.LocationControl({anchor:BMAP_ANCHOR_TOP_RIGHT,offset:new BMapGL.Size(20,20)});e.addControl(k),k.addEventListener("locationSuccess",function(e){var a="";a+=e.addressComponent.province,a+=e.addressComponent.city,a+=e.addressComponent.district,a+=e.addressComponent.street,a+=e.addressComponent.streetNumber,alert("当前定位地址为："+a)}),k.addEventListener("locationError",function(e){alert(e.message)}),e.enableScrollWheelZoom(!0);var P=new BMapGL.ScaleControl;e.addControl(P);var x=new BMapGL.ZoomControl;e.addControl(x)});